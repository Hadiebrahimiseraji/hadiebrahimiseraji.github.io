<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¢Ù‡Ù† Ø¢Ù„Ø§Øª Ù…Ø­Ø³Ù† Ù…Ø­Ù…Ø¯ÛŒ Ù‚Ø§Ø¦Ù…â€ŒØ´Ù‡Ø±</title>
  <meta name="description" content="Ø¢Ù‡Ù† Ø¢Ù„Ø§Øª Ù…Ø­Ø³Ù† Ù…Ø­Ù…Ø¯ÛŒ Ø¯Ø± Ù‚Ø§Ø¦Ù…â€ŒØ´Ù‡Ø± - Ù…ÛŒÙ„Ú¯Ø±Ø¯ØŒ ØªÛŒØ±Ø¢Ù‡Ù†ØŒ Ù†Ø¨Ø´ÛŒØŒ Ø§Ø±Ø³Ø§Ù„ Ù‡Ù…Ø§Ù†â€ŒØ±ÙˆØ²." />
  <meta name="author" content="Ø¢Ù‡Ù† Ø¢Ù„Ø§Øª Ù…Ø­Ø³Ù†" />
  <meta name="format-detection" content="telephone=no" />
  
  <!-- Leaflet Map CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    html, body { height: 100%; width: 100%; }
    
    body {
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
      background: #0b1020;
      color: #2b2b2b;
      overflow: hidden;
    }

    /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ù„Ø§ÛŒÙ‡ Ø­Ø±Ú©Ø§ØªÛŒ */
    #cinema-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 99999;
      background: linear-gradient(180deg, #000 0%, #1a2a4a 50%, #000 100%);
      backdrop-filter: blur(1px);
      opacity: 1;
      transition: opacity 800ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
      display: flex;
      align-items: flex-end;
      justify-content: center;
    }

    #cinema-overlay.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    /* Ú©Ø±Ù‡ ÛŒØ§ ÙÙˆÙ„Ø¯ Ø¨Ø§Ù„Ø§ */
    .cinema-top {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 0;
      background: #000;
      animation: topClose 3.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
      z-index: 10;
    }

    @keyframes topClose {
      0% { height: 0; }
      5%, 95% { height: 0; }
      100% { height: 50vh; }
    }

    /* Ú©Ø±Ù‡ ÛŒØ§ ÙÙˆÙ„Ø¯ Ù¾Ø§ÛŒÙŠÙ† */
    .cinema-bottom {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 0;
      background: #000;
      animation: bottomClose 3.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
      z-index: 10;
    }

    @keyframes bottomClose {
      0% { height: 0; }
      5%, 95% { height: 0; }
      100% { height: 50vh; }
    }

    /* ÙÛŒÙ„Ù… Ú©Ø´ÛŒ Ø´Ù‡Ø± */
    .cinema-film {
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      animation: cinemaFly 3.2s ease-out forwards;
    }

    @keyframes cinemaFly {
      0% {
        transform: translateY(-100vh) scale(1.1);
        opacity: 0.95;
      }
      10% {
        opacity: 1;
      }
      85% {
        opacity: 1;
      }
      100% {
        transform: translateY(0) scale(1);
        opacity: 0.9;
      }
    }

    /* Ù…Ø§Ø±Ú©Ø± Ø±Ø²Ù…ÙˆØ±Ú©Ø´ (SVG Ø³Ø§Ø¯Ù‡) */
    .cinema-focus {
      position: absolute;
      width: 120px;
      height: 120px;
      border: 3px solid rgba(255, 255, 255, 0.4);
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.8);
      animation: cinemaFocus 3.2s ease-out forwards;
      pointer-events: none;
      box-shadow: 0 0 60px rgba(255, 200, 0, 0.3), inset 0 0 30px rgba(255, 200, 0, 0.1);
    }

    @keyframes cinemaFocus {
      0% {
        transform: translate(-50%, -50%) scale(2.5);
        opacity: 0.6;
      }
      15% {
        opacity: 0.8;
      }
      85% {
        opacity: 0.5;
      }
      100% {
        transform: translate(-50%, -50%) scale(0.8);
        opacity: 0;
      }
    }

    /* Ù†Ù‚Ù„ Ùˆ Ù…Ø®ÙÛŒ Ø´ÙˆØ¯Ù† Ù…ØªÙ† */
    .cinema-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: #fff;
      z-index: 5;
      pointer-events: none;
      animation: cinemaTextFade 3.2s ease-out forwards;
    }

    .cinema-text-main {
      font-size: clamp(24px, 6vw, 56px);
      font-weight: 900;
      margin: 0;
      letter-spacing: 2px;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
    }

    .cinema-text-sub {
      font-size: clamp(12px, 2.5vw, 18px);
      margin: 8px 0 0;
      opacity: 0.85;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
    }

    @keyframes cinemaTextFade {
      0% {
        opacity: 0.3;
        transform: translate(-50%, -50%) scale(0.9);
      }
      20% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      75% {
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.95);
      }
    }

    /* Ù†Ù‚Ø´Ù‡ Ø¨Ø§ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† */
    #hero-map-wrap {
      position: relative;
      width: 100%;
      height: 100vh;
      overflow: hidden;
      background: linear-gradient(135deg, #070a12 0%, #0b1020 100%);
      opacity: 0;
      transition: opacity 800ms ease-out 3.3s;
    }

    #hero-map-wrap.show {
      opacity: 1;
    }

    #map {
      width: 100%;
      height: 100%;
    }

    /* Ù¾Ø§Ù¾ Ø¢Ù¾ Ù…ØºØ§Ø²Ù‡ */
    .shop-popup {
      width: 240px;
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
    }

    .shop-popup img {
      width: 100%;
      height: 140px;
      object-fit: cover;
      border-radius: 12px;
      display: block;
      margin: 10px 0 12px;
      border: 1px solid rgba(0, 0, 0, 0.1);
    }

    .shop-popup .name {
      font-weight: 900;
      margin: 0 0 8px;
      font-size: 16px;
      color: #0b1020;
    }

    .shop-popup .addr {
      margin: 0 0 12px;
      font-size: 13px;
      opacity: 0.75;
      color: #2b2b2b;
    }

    .shop-popup .actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    .shop-popup .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      text-decoration: none;
      padding: 9px 12px;
      border-radius: 10px;
      border: none;
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: all 250ms ease;
      flex: 1;
      min-height: 36px;
    }

    .shop-popup .btn-primary {
      color: #fff;
      background: #0b1020;
    }

    .shop-popup .btn-primary:hover {
      background: #1a2844;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .shop-popup .btn-secondary {
      color: #0b1020;
      background: #f0f0f0;
      border: 1px solid #ddd;
    }

    .shop-popup .btn-secondary:hover {
      background: #e8e8e8;
      transform: translateY(-2px);
    }

    /* Leaflet Ø±Ø§Ù† */
    .leaflet-container {
      background: #e5e5e5;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
    }

    .leaflet-popup-content-wrapper {
      border-radius: 12px;
      box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);
    }

    .leaflet-popup-tip {
      background: white;
    }

    .leaflet-marker-icon {
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .leaflet-control {
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .leaflet-control-attribution {
      font-size: 11px;
      background: rgba(255, 255, 255, 0.85) !important;
      backdrop-filter: blur(4px);
    }

    @media (prefers-reduced-motion: reduce) {
      #cinema-overlay,
      .cinema-top,
      .cinema-bottom,
      .cinema-film,
      .cinema-focus,
      .cinema-text {
        animation: none !important;
        transition: none !important;
      }
      #cinema-overlay { opacity: 0; }
      #hero-map-wrap { opacity: 1; transition: none; }
    }
  </style>
</head>
<body>
  <!-- Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø³ÛŒÙ†Ù…Ø§ÛŒÛŒ ÙˆØ±ÙˆØ¯ -->
  <div id="cinema-overlay">
    <div class="cinema-top"></div>
    <div class="cinema-bottom"></div>
    
    <!-- ÙÛŒÙ„Ù… Ù…ÛŒØ¯Ø§Ù† Ø´Ù‡Ø± -->
    <img 
      class="cinema-film" 
      src="assets/images/storefront.jpg" 
      alt="ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù‡Ù† Ø¢Ù„Ø§Øª"
      loading="eager"
      decoding="sync"
    >
    
    <!-- Ù„ÛŒØ²Ø± Ù„Ø§Ù„Ù‡ Ø±Ø²Ù…ÙˆØ±Ú©Ø´ -->
    <div class="cinema-focus"></div>
    
    <!-- Ù…ØªÙ† -->
    <div class="cinema-text">
      <p class="cinema-text-main">Ø¢Ù‡Ù† Ø¢Ù„Ø§Øª</p>
      <p class="cinema-text-sub">Ù…Ø­Ø³Ù† Ù…Ø­Ù…Ø¯ÛŒ - Ù‚Ø§Ø¦Ù…â€ŒØ´Ù‡Ø±</p>
    </div>
  </div>

  <!-- Ù†Ù‚Ø´Ù‡ Leaflet -->
  <section id="hero-map-wrap">
    <div id="map" role="application" aria-label="Ù†Ù‚Ø´Ù‡ Ù…Ø¹Ø±ÙÛŒÛŒ Ù…ØºØ§Ø²Ù‡"></div>
  </section>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script>
    (() => {
      "use strict";

      /* ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙØ±ÙˆØ´Ú¯Ø§Ù‡ */
      const SHOP = {
        name: "Ø¢Ù‡Ù† Ø¢Ù„Ø§Øª Ù…Ø­Ø³Ù† Ù…Ø­Ù…Ø¯ÛŒ",
        address: "Ù‚Ø§Ø¦Ù…â€ŒØ´Ù‡Ø±ØŒ Ù…ÛŒØ¯Ø§Ù† Ø§Ù…Ø§Ù…",
        phone: "0911 328 6812",
        lat: 36.4719,
        lng: 52.8620,
        photoUrl: "assets/images/storefront.jpg"
      };

      const TARGET_ZOOM = 17;
      const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      // Ø¨Ø¹Ø¯ Ø§Ø² Ù…Ø±ÙˆØ± Ú©Ø§ÙÛŒ Ø²Ù…Ø§Ù† - Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø­Ø°Ù Ùˆ Ù†Ù‚Ø´Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯
      setTimeout(() => {
        document.getElementById("cinema-overlay").classList.add("fade-out");
        document.getElementById("hero-map-wrap").classList.add("show");

        // Ø±Ø³Ù… Ù†Ù‚Ø´Ù‡
        const map = L.map("map", {
          zoomControl: true,
          attributionControl: true,
          worldCopyJump: false,
          preferCanvas: true,
          fadeAnimation: false,
          markerZoomAnimation: false
        });

        map.setView([SHOP.lat, SHOP.lng], TARGET_ZOOM);

        // Tiles
        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          maxZoom: 19,
          minZoom: 2,
          subdomains: "abc",
          keepBuffer: 2,
          updateWhenIdle: true,
          updateWhenZooming: false,
          attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // Ù…Ø§Ø±Ú©Ø± Ùˆ Ù¾Ø§Ù¾ Ø¢Ù¾
        const gmapsLink = `https://www.google.com/maps?q=${SHOP.lat},${SHOP.lng}`;
        const waLink = `https://wa.me/989113286812?text=Ø³Ù„Ø§Ù…%2C%20Ø¨Ø±Ø§ÛŒ%20Ø§Ø³ØªØ¹Ù„Ø§Ù…%20Ù‚ÛŒÙ…Øª%20Ø¢Ù‡Ù†%20Ù¾ÛŒØ§Ù…%20Ø¯Ø§Ø¯Ù….`;

        const popupHtml = `
          <div class="shop-popup" dir="rtl">
            <p class="name">${escapeHtml(SHOP.name)}</p>
            <img loading="lazy" decoding="async" src="${escapeAttr(SHOP.photoUrl)}" alt="Ø¹ÙƒØ³ ÙØ±ÙˆØ´Ú¯Ø§Ù‡">
            <p class="addr">ğŸ“„ ${escapeHtml(SHOP.address)}</p>
            <p class="addr" style="margin-bottom: 6px;">&#128222; <span style="direction: ltr; unicode-bidi: embed;">${SHOP.phone}</span></p>
            <div class="actions">
              <a class="btn btn-primary" href="${escapeAttr(gmapsLink)}" target="_blank" rel="noopener">ğŸ“„ Maps</a>
              <a class="btn btn-secondary" href="${escapeAttr(waLink)}" target="_blank" rel="noopener">WhatsApp</a>
            </div>
          </div>
        `;

        const marker = L.marker([SHOP.lat, SHOP.lng], { keyboard: false })
          .addTo(map)
          .bindPopup(popupHtml, { maxWidth: 260 });

        // Ø§Ø² Ú©Ø§Ø± Ø´Ø±ÙˆØ¹ Ú©Ù†ÙŠØ¯ - Ù¾Ø§Ù¾ Ø¢Ù¾ Ø§Ø² Ø®ÙˆØ¯ Ø¨Ø§Ø²
        marker.openPopup();
      }, 3400);

      // ØªÙˆØ§Ø¨Ø¹ Ø§Ù…Ù†ÛŒØªÛŒ
      function escapeHtml(str) {
        return String(str).replace(/[&<>"']/g, s => ({
          "&": "&amp;",
          "<": "&lt;",
          ">": "&gt;",
          '"': "&quot;",
          "'": "&#39;"
        }[s]));
      }
      function escapeAttr(str) {
        return String(str).replace(/"/g, "&quot;");
      }
    })();
  </script>
</body>
</html>